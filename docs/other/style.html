<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>编程风格 | JavaScript Basic</title>
    <meta name="description" content="Love what you do, do what you love. :)">
    <link ref="icon" href="/javascript-basic/image/js-cube.png">
    
    <link rel="preload" href="/javascript-basic/assets/css/0.styles.39f3b0f6.css" as="style"><link rel="preload" href="/javascript-basic/assets/js/app.d76c9314.js" as="script"><link rel="preload" href="/javascript-basic/assets/js/2.426157aa.js" as="script"><link rel="preload" href="/javascript-basic/assets/js/123.91ec8750.js" as="script"><link rel="prefetch" href="/javascript-basic/assets/js/10.213aca18.js"><link rel="prefetch" href="/javascript-basic/assets/js/100.16f6b9fb.js"><link rel="prefetch" href="/javascript-basic/assets/js/101.1c1a92e0.js"><link rel="prefetch" href="/javascript-basic/assets/js/102.2e000dde.js"><link rel="prefetch" href="/javascript-basic/assets/js/103.e4271f21.js"><link rel="prefetch" href="/javascript-basic/assets/js/104.b6ed2c86.js"><link rel="prefetch" href="/javascript-basic/assets/js/105.3c5d1692.js"><link rel="prefetch" href="/javascript-basic/assets/js/106.c7cfbb4c.js"><link rel="prefetch" href="/javascript-basic/assets/js/107.ec4a877d.js"><link rel="prefetch" href="/javascript-basic/assets/js/108.9260af53.js"><link rel="prefetch" href="/javascript-basic/assets/js/109.cc741179.js"><link rel="prefetch" href="/javascript-basic/assets/js/11.21927196.js"><link rel="prefetch" href="/javascript-basic/assets/js/110.94818125.js"><link rel="prefetch" href="/javascript-basic/assets/js/111.f562aaa9.js"><link rel="prefetch" href="/javascript-basic/assets/js/112.7ed286d6.js"><link rel="prefetch" href="/javascript-basic/assets/js/113.047b7d16.js"><link rel="prefetch" href="/javascript-basic/assets/js/114.0d66c8bc.js"><link rel="prefetch" href="/javascript-basic/assets/js/115.4b459ead.js"><link rel="prefetch" href="/javascript-basic/assets/js/116.83d19963.js"><link rel="prefetch" href="/javascript-basic/assets/js/117.ba996054.js"><link rel="prefetch" href="/javascript-basic/assets/js/118.aacd0cc8.js"><link rel="prefetch" href="/javascript-basic/assets/js/119.80a845fe.js"><link rel="prefetch" href="/javascript-basic/assets/js/12.5b759388.js"><link rel="prefetch" href="/javascript-basic/assets/js/120.31f465f2.js"><link rel="prefetch" href="/javascript-basic/assets/js/121.54ee126d.js"><link rel="prefetch" href="/javascript-basic/assets/js/122.8190a16b.js"><link rel="prefetch" href="/javascript-basic/assets/js/124.8874edce.js"><link rel="prefetch" href="/javascript-basic/assets/js/125.f3a7a527.js"><link rel="prefetch" href="/javascript-basic/assets/js/126.5c29d3af.js"><link rel="prefetch" href="/javascript-basic/assets/js/127.b264dbbd.js"><link rel="prefetch" href="/javascript-basic/assets/js/128.12b24639.js"><link rel="prefetch" href="/javascript-basic/assets/js/129.89e326ba.js"><link rel="prefetch" href="/javascript-basic/assets/js/13.66ffa5d9.js"><link rel="prefetch" href="/javascript-basic/assets/js/130.2321a1be.js"><link rel="prefetch" href="/javascript-basic/assets/js/131.ebf74a94.js"><link rel="prefetch" href="/javascript-basic/assets/js/132.b90e4b8a.js"><link rel="prefetch" href="/javascript-basic/assets/js/133.8ba46cfa.js"><link rel="prefetch" href="/javascript-basic/assets/js/134.aec3b1f5.js"><link rel="prefetch" href="/javascript-basic/assets/js/135.855295b4.js"><link rel="prefetch" href="/javascript-basic/assets/js/136.c58d5a56.js"><link rel="prefetch" href="/javascript-basic/assets/js/137.d8fe4618.js"><link rel="prefetch" href="/javascript-basic/assets/js/138.e0d12b29.js"><link rel="prefetch" href="/javascript-basic/assets/js/139.5c533626.js"><link rel="prefetch" href="/javascript-basic/assets/js/14.aefc1971.js"><link rel="prefetch" href="/javascript-basic/assets/js/140.ee5f3a98.js"><link rel="prefetch" href="/javascript-basic/assets/js/141.b1c96add.js"><link rel="prefetch" href="/javascript-basic/assets/js/142.cbb850ed.js"><link rel="prefetch" href="/javascript-basic/assets/js/143.e3d1aed8.js"><link rel="prefetch" href="/javascript-basic/assets/js/144.0198f0f2.js"><link rel="prefetch" href="/javascript-basic/assets/js/145.e3ba3f31.js"><link rel="prefetch" href="/javascript-basic/assets/js/146.b95055d5.js"><link rel="prefetch" href="/javascript-basic/assets/js/147.3ce6a242.js"><link rel="prefetch" href="/javascript-basic/assets/js/148.b1107492.js"><link rel="prefetch" href="/javascript-basic/assets/js/149.4727048a.js"><link rel="prefetch" href="/javascript-basic/assets/js/15.09f9f11a.js"><link rel="prefetch" href="/javascript-basic/assets/js/150.410c6800.js"><link rel="prefetch" href="/javascript-basic/assets/js/151.8c017461.js"><link rel="prefetch" href="/javascript-basic/assets/js/152.1c3663d1.js"><link rel="prefetch" href="/javascript-basic/assets/js/153.b70b3bd0.js"><link rel="prefetch" href="/javascript-basic/assets/js/154.00ea1960.js"><link rel="prefetch" href="/javascript-basic/assets/js/155.7703b572.js"><link rel="prefetch" href="/javascript-basic/assets/js/156.e1066aad.js"><link rel="prefetch" href="/javascript-basic/assets/js/157.e6d65549.js"><link rel="prefetch" href="/javascript-basic/assets/js/158.a5ee35d7.js"><link rel="prefetch" href="/javascript-basic/assets/js/159.d33e6dd2.js"><link rel="prefetch" href="/javascript-basic/assets/js/16.31811de7.js"><link rel="prefetch" href="/javascript-basic/assets/js/17.a1e46286.js"><link rel="prefetch" href="/javascript-basic/assets/js/18.ac1d7b4a.js"><link rel="prefetch" href="/javascript-basic/assets/js/19.7fcaf46d.js"><link rel="prefetch" href="/javascript-basic/assets/js/20.788826f9.js"><link rel="prefetch" href="/javascript-basic/assets/js/21.9d68a5df.js"><link rel="prefetch" href="/javascript-basic/assets/js/22.8d2f22e2.js"><link rel="prefetch" href="/javascript-basic/assets/js/23.365878bd.js"><link rel="prefetch" href="/javascript-basic/assets/js/24.d9d1620e.js"><link rel="prefetch" href="/javascript-basic/assets/js/25.c0a0ab34.js"><link rel="prefetch" href="/javascript-basic/assets/js/26.6280174b.js"><link rel="prefetch" href="/javascript-basic/assets/js/27.f4c988ad.js"><link rel="prefetch" href="/javascript-basic/assets/js/28.258aa1c2.js"><link rel="prefetch" href="/javascript-basic/assets/js/29.50c96dde.js"><link rel="prefetch" href="/javascript-basic/assets/js/3.538eddaa.js"><link rel="prefetch" href="/javascript-basic/assets/js/30.2e5ffa0e.js"><link rel="prefetch" href="/javascript-basic/assets/js/31.587290ed.js"><link rel="prefetch" href="/javascript-basic/assets/js/32.76f277ff.js"><link rel="prefetch" href="/javascript-basic/assets/js/33.9a7ebca0.js"><link rel="prefetch" href="/javascript-basic/assets/js/34.aec1171f.js"><link rel="prefetch" href="/javascript-basic/assets/js/35.38d4ce5d.js"><link rel="prefetch" href="/javascript-basic/assets/js/36.3d497340.js"><link rel="prefetch" href="/javascript-basic/assets/js/37.c968f5c2.js"><link rel="prefetch" href="/javascript-basic/assets/js/38.f15a2948.js"><link rel="prefetch" href="/javascript-basic/assets/js/39.672bcc60.js"><link rel="prefetch" href="/javascript-basic/assets/js/4.507fc064.js"><link rel="prefetch" href="/javascript-basic/assets/js/40.23efdbaf.js"><link rel="prefetch" href="/javascript-basic/assets/js/41.3fa000c4.js"><link rel="prefetch" href="/javascript-basic/assets/js/42.f703325a.js"><link rel="prefetch" href="/javascript-basic/assets/js/43.662750e7.js"><link rel="prefetch" href="/javascript-basic/assets/js/44.fef0a959.js"><link rel="prefetch" href="/javascript-basic/assets/js/45.28027e70.js"><link rel="prefetch" href="/javascript-basic/assets/js/46.20a00467.js"><link rel="prefetch" href="/javascript-basic/assets/js/47.42eb1e7a.js"><link rel="prefetch" href="/javascript-basic/assets/js/48.4784da23.js"><link rel="prefetch" href="/javascript-basic/assets/js/49.ed68a8e2.js"><link rel="prefetch" href="/javascript-basic/assets/js/5.e8f56ba8.js"><link rel="prefetch" href="/javascript-basic/assets/js/50.4ef981ac.js"><link rel="prefetch" href="/javascript-basic/assets/js/51.7f0ed067.js"><link rel="prefetch" href="/javascript-basic/assets/js/52.803d891f.js"><link rel="prefetch" href="/javascript-basic/assets/js/53.4bd62ef4.js"><link rel="prefetch" href="/javascript-basic/assets/js/54.e935d58b.js"><link rel="prefetch" href="/javascript-basic/assets/js/55.ae72afe7.js"><link rel="prefetch" href="/javascript-basic/assets/js/56.5a05370b.js"><link rel="prefetch" href="/javascript-basic/assets/js/57.56132baf.js"><link rel="prefetch" href="/javascript-basic/assets/js/58.a1fb9368.js"><link rel="prefetch" href="/javascript-basic/assets/js/59.d4b37194.js"><link rel="prefetch" href="/javascript-basic/assets/js/6.247af351.js"><link rel="prefetch" href="/javascript-basic/assets/js/60.e6fea6ff.js"><link rel="prefetch" href="/javascript-basic/assets/js/61.f122c052.js"><link rel="prefetch" href="/javascript-basic/assets/js/62.cb5d2513.js"><link rel="prefetch" href="/javascript-basic/assets/js/63.dfd8565d.js"><link rel="prefetch" href="/javascript-basic/assets/js/64.282225c8.js"><link rel="prefetch" href="/javascript-basic/assets/js/65.ebb1a525.js"><link rel="prefetch" href="/javascript-basic/assets/js/66.fb73fb28.js"><link rel="prefetch" href="/javascript-basic/assets/js/67.8dc650c7.js"><link rel="prefetch" href="/javascript-basic/assets/js/68.1d17a969.js"><link rel="prefetch" href="/javascript-basic/assets/js/69.b7aef95f.js"><link rel="prefetch" href="/javascript-basic/assets/js/7.713e735d.js"><link rel="prefetch" href="/javascript-basic/assets/js/70.38fe7dca.js"><link rel="prefetch" href="/javascript-basic/assets/js/71.30cb39c3.js"><link rel="prefetch" href="/javascript-basic/assets/js/72.e3e0c1b7.js"><link rel="prefetch" href="/javascript-basic/assets/js/73.20511175.js"><link rel="prefetch" href="/javascript-basic/assets/js/74.4e3f7455.js"><link rel="prefetch" href="/javascript-basic/assets/js/75.a756670c.js"><link rel="prefetch" href="/javascript-basic/assets/js/76.44ff09c1.js"><link rel="prefetch" href="/javascript-basic/assets/js/77.d0fe3b36.js"><link rel="prefetch" href="/javascript-basic/assets/js/78.cf9dbd94.js"><link rel="prefetch" href="/javascript-basic/assets/js/79.4b9e9f49.js"><link rel="prefetch" href="/javascript-basic/assets/js/8.998003ca.js"><link rel="prefetch" href="/javascript-basic/assets/js/80.99fe1b4f.js"><link rel="prefetch" href="/javascript-basic/assets/js/81.2bb3925b.js"><link rel="prefetch" href="/javascript-basic/assets/js/82.5116340b.js"><link rel="prefetch" href="/javascript-basic/assets/js/83.0306557d.js"><link rel="prefetch" href="/javascript-basic/assets/js/84.568158fd.js"><link rel="prefetch" href="/javascript-basic/assets/js/85.c5676be2.js"><link rel="prefetch" href="/javascript-basic/assets/js/86.caa2876a.js"><link rel="prefetch" href="/javascript-basic/assets/js/87.f5ba9baa.js"><link rel="prefetch" href="/javascript-basic/assets/js/88.f13a0e25.js"><link rel="prefetch" href="/javascript-basic/assets/js/89.0bfea503.js"><link rel="prefetch" href="/javascript-basic/assets/js/9.45e9d1f7.js"><link rel="prefetch" href="/javascript-basic/assets/js/90.09acecb5.js"><link rel="prefetch" href="/javascript-basic/assets/js/91.9c85f5d6.js"><link rel="prefetch" href="/javascript-basic/assets/js/92.9bb7eeaf.js"><link rel="prefetch" href="/javascript-basic/assets/js/93.ee248a3c.js"><link rel="prefetch" href="/javascript-basic/assets/js/94.7de89837.js"><link rel="prefetch" href="/javascript-basic/assets/js/95.bf144440.js"><link rel="prefetch" href="/javascript-basic/assets/js/96.28660f78.js"><link rel="prefetch" href="/javascript-basic/assets/js/97.b737ee27.js"><link rel="prefetch" href="/javascript-basic/assets/js/98.27acc380.js"><link rel="prefetch" href="/javascript-basic/assets/js/99.533a64d4.js">
    <link rel="stylesheet" href="/javascript-basic/assets/css/0.styles.39f3b0f6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/javascript-basic/" class="home-link router-link-active"><!----> <span class="site-name">JavaScript Basic</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/itellboy/javascript-basic" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/itellboy/javascript-basic" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/javascript-basic/welcome.html" class="sidebar-link">welcome</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>标准内建对象</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>表达式和操作符</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>语句和声明</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>函数</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>TypeScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>其他</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/javascript-basic/other/style.html" class="active sidebar-link">编程风格</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javascript-basic/other/style.html#_1-变量声明" class="sidebar-link">1. 变量声明</a></li><li class="sidebar-sub-header"><a href="/javascript-basic/other/style.html#_2-数组字面量" class="sidebar-link">2. 数组字面量</a></li><li class="sidebar-sub-header"><a href="/javascript-basic/other/style.html#_3-对象字面量" class="sidebar-link">3. 对象字面量</a></li><li class="sidebar-sub-header"><a href="/javascript-basic/other/style.html#_4-类" class="sidebar-link">4. 类</a></li><li class="sidebar-sub-header"><a href="/javascript-basic/other/style.html#_5-函数" class="sidebar-link">5. 函数</a></li><li class="sidebar-sub-header"><a href="/javascript-basic/other/style.html#_6-字符串字面量" class="sidebar-link">6. 字符串字面量</a></li><li class="sidebar-sub-header"><a href="/javascript-basic/other/style.html#_7-数值字面量" class="sidebar-link">7. 数值字面量</a></li><li class="sidebar-sub-header"><a href="/javascript-basic/other/style.html#_8-控制结构" class="sidebar-link">8. 控制结构</a></li><li class="sidebar-sub-header"><a href="/javascript-basic/other/style.html#_9-this" class="sidebar-link">9. this</a></li><li class="sidebar-sub-header"><a href="/javascript-basic/other/style.html#_10-相等检查" class="sidebar-link">10. 相等检查</a></li><li class="sidebar-sub-header"><a href="/javascript-basic/other/style.html#_11-不允许使用" class="sidebar-link">11. 不允许使用</a></li></ul></li><li><a href="/javascript-basic/other/interview.html" class="sidebar-link">面试题</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="编程风格"><a href="#编程风格" aria-hidden="true" class="header-anchor">#</a> 编程风格</h1> <p>良好的编程风格有助于团队的协同开发，这里是针对 <a href="https://google.github.io/styleguide/jsguide.html" target="_blank" rel="noopener noreferrer">Google JavaScript Style Guide<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <strong>语言特性章节</strong>的翻译，持续修正中，仅供参考。</p> <h2 id="_1-变量声明"><a href="#_1-变量声明" aria-hidden="true" class="header-anchor">#</a> 1. 变量声明</h2> <h3 id="_1-1-使用const和let"><a href="#_1-1-使用const和let" aria-hidden="true" class="header-anchor">#</a> 1.1 使用<code>const</code>和<code>let</code></h3> <p>使用<code>const</code>或者<code>let</code>声明局部变量，默认使用<code>const</code>声明。当明确该变量在以后会被重新赋值的时候使用<code>let</code>，不再使用<code>var</code>声明变量。</p> <h3 id="_1-2-一次只声明一个变量"><a href="#_1-2-一次只声明一个变量" aria-hidden="true" class="header-anchor">#</a> 1.2 一次只声明一个变量</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// good</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

<span class="token comment">// bad</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_1-3-需要的时候再声明，并尽可能初始化该变量"><a href="#_1-3-需要的时候再声明，并尽可能初始化该变量" aria-hidden="true" class="header-anchor">#</a> 1.3 需要的时候再声明，并尽可能初始化该变量</h3> <p>局部变量通常不要在其包含的块或类似块的结构的开始处声明。</p> <p>为了缩小变量的作用域，应当在该变量初次使用的时候再声明。</p> <h3 id="_1-4-根据需要声明变量类型"><a href="#_1-4-根据需要声明变量类型" aria-hidden="true" class="header-anchor">#</a> 1.4 根据需要声明变量类型</h3> <p>在声明语句的上方添加 JSDoc 注释或者使用行内注释都是可行的，但是两者不能同时使用。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token comment">/** number **/</span> data <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * description.
 * @type {number}
 **/</span>
<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="_2-数组字面量"><a href="#_2-数组字面量" aria-hidden="true" class="header-anchor">#</a> 2. 数组字面量</h2> <h3 id="_2-1-使用尾部逗号"><a href="#_2-1-使用尾部逗号" aria-hidden="true" class="header-anchor">#</a> 2.1 使用尾部逗号</h3> <p>当最后一个元素和右括号之间有换行符的时候，在最后一个元素后面加上逗号。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// good</span>
<span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token string">'cat'</span><span class="token punctuation">,</span>
  <span class="token string">'dog'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// bad</span>
<span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token string">'cat'</span><span class="token punctuation">,</span>
  <span class="token string">'dog'</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_2-2-不要使用array构造器创建数组"><a href="#_2-2-不要使用array构造器创建数组" aria-hidden="true" class="header-anchor">#</a> 2.2 不要使用<code>Array</code>构造器创建数组</h3> <p><code>Array</code>构造函数会因为传递参数的不同会产生不同的结果，使用字面量的形式来创建数组。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// bad</span>
<span class="token keyword">const</span> a1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> a2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> a3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> a4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>在上面代码中，会出现一些歧义。当<code>x</code>为一个整数的时候，<code>a3</code>会是一个包含<code>x</code>个<code>undefined</code>成员的数组；如果<code>x</code>为其他数字，则会抛出异常。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// good</span>
<span class="token keyword">const</span> a1 <span class="token operator">=</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> a2 <span class="token operator">=</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> a3 <span class="token operator">=</span> <span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> a4 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>在定义一个定长度的数组的时候可以使用<code>new Array(length)</code>来定义</p> <h3 id="_2-3-非数值属性"><a href="#_2-3-非数值属性" aria-hidden="true" class="header-anchor">#</a> 2.3 非数值属性</h3> <p>不要在一个数组里面定义和使用非数值的属性，除开<code>length</code>属性。如果要使用，请使用<code>Map</code>或者<code>Object</code>代替。</p> <h3 id="_2-4-解构"><a href="#_2-4-解构" aria-hidden="true" class="header-anchor">#</a> 2.4 解构</h3> <p>可以使用数组字面量来对数组进行解构，吧 rest 参数放在最后的位置，不需要使用的变量可以省略。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">,</span> <span class="token operator">...</span>rest<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">getArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span><span class="token punctuation">,</span> b<span class="token punctuation">,</span><span class="token punctuation">,</span> c<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">getArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>。
可以在函数参数使用数组解构，如果参数是可选的，可以提供一个<code>[]</code>作为参数的默认值，成员的默认值放在左边。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_2-5-扩展运算符"><a href="#_2-5-扩展运算符" aria-hidden="true" class="header-anchor">#</a> 2.5 扩展运算符</h3> <p>使用扩展运算符<code>...</code>展开一个数组，并且可以代替一些数组原型的方法，<code>...</code>后面没有空格。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">[</span><span class="token operator">...</span>arr<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// instead of Array.prototype.slice.call(arr)</span>
<span class="token punctuation">[</span><span class="token operator">...</span>bar<span class="token punctuation">,</span> <span class="token operator">...</span>foo<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// instead of bar.concat(foo)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_3-对象字面量"><a href="#_3-对象字面量" aria-hidden="true" class="header-anchor">#</a> 3. 对象字面量</h2> <h3 id="_3-1-使用尾部逗号"><a href="#_3-1-使用尾部逗号" aria-hidden="true" class="header-anchor">#</a> 3.1 使用尾部逗号</h3> <p>当最后一个属性和右括号之间有换行符的时候，在最后一个属性后面加上逗号。</p> <h3 id="_3-2-不要使用object构造器来创建对象"><a href="#_3-2-不要使用object构造器来创建对象" aria-hidden="true" class="header-anchor">#</a> 3.2 不要使用<code>Object</code>构造器来创建对象</h3> <p>虽然<code>Object</code>没有<code>Array</code>那样混淆的问题，但还是不要使用<code>Object</code>来创建对象，直接使用<code>{}</code>来创建。</p> <h3 id="_3-3-不要混合使用带引号和不带引号的键值"><a href="#_3-3-不要混合使用带引号和不带引号的键值" aria-hidden="true" class="header-anchor">#</a> 3.3 不要混合使用带引号和不带引号的键值</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// bad</span>
<span class="token punctuation">{</span>
  width<span class="token punctuation">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
  <span class="token string">'maxWidth'</span><span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_3-4-计算属性名"><a href="#_3-4-计算属性名" aria-hidden="true" class="header-anchor">#</a> 3.4 计算属性名</h3> <p>计算属性名（e.g.,<code>['foo' + bar()]: '10'</code>）是被允许使用的，但要把它作为带引号的属性名（不能和不带引号的属性名混合使用），除非这个属性名是一个 symbol 值（e.g.,<code>[Symbol.iterator]</code>）。</p> <p>枚举值也能被用作属性名，但是也不能和其他非枚举的属性名混合使用。</p> <h3 id="_3-5-方法简写"><a href="#_3-5-方法简写" aria-hidden="true" class="header-anchor">#</a> 3.5 方法简写</h3> <p>对象里面的方法可以使用<code>{method() { ... }}</code>简写，取代冒号后面跟<code>function</code>或者箭头函数的写法。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">return</span> <span class="token punctuation">{</span>
  stuff<span class="token punctuation">:</span> <span class="token string">'candy'</span><span class="token punctuation">,</span>
  <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>stuff<span class="token punctuation">;</span>  <span class="token comment">// Returns 'candy'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>简写方法里面的<code>this</code>指向当前对象自己，箭头函数里面的<code>this</code>指向对象外面的作用域。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token punctuation">{</span>
  <span class="token function">getObjectLiteral</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>stuff <span class="token operator">=</span> <span class="token string">'fruit'</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      stuff<span class="token punctuation">:</span> <span class="token string">'candy'</span><span class="token punctuation">,</span>
      <span class="token function-variable function">method</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>stuff<span class="token punctuation">,</span>  <span class="token comment">// Returns 'fruit'</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_3-6-属性简写"><a href="#_3-6-属性简写" aria-hidden="true" class="header-anchor">#</a> 3.6 属性简写</h3> <p>在对象里面，属性可以被简写。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> foo <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> bar <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  foo<span class="token punctuation">,</span>
  bar<span class="token punctuation">,</span>
  <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>foo <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>bar<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> obj<span class="token punctuation">.</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_3-7-解构赋值"><a href="#_3-7-解构赋值" aria-hidden="true" class="header-anchor">#</a> 3.7 解构赋值</h3> <p>对象的解构赋值可用于赋值语句的左侧，用来在一个对象里面解构出多个值。</p> <p>对象解构赋值能用在函数参数里面，但应该尽可能保持简洁：只有一层的简写属性。如果有更深层次的嵌套或者计算属性，则不可以使用参数解构。</p> <p>左边解构参数的默认值可以写成<code>{str = 'some default'} = {}</code>而不是<code>{str} = {str: 'some default'}</code>，如果待解构的参数对象是可选的，必须使用<code>{}</code>对参数设置默认值。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/**
 * @param {string} ordinary
 * @param {{num: (number|undefined), str: (string|undefined)}=} param1
 *     num: The number of times to do something.
 *     str: A string to do stuff to.
 */</span>
<span class="token keyword">function</span> <span class="token function">destructured</span><span class="token punctuation">(</span>ordinary<span class="token punctuation">,</span> <span class="token punctuation">{</span>num<span class="token punctuation">,</span> str <span class="token operator">=</span> <span class="token string">'some default'</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_3-8-枚举"><a href="#_3-8-枚举" aria-hidden="true" class="header-anchor">#</a> 3.8 枚举</h3> <p>在对象里面，枚举可以通过<code>@enum</code>注解来定义。在枚举对象被定义之后，它不能添加其他额外的属性。</p> <p>枚举必须被序列化，并且所有的枚举值不能改变。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/**
 * Supported temperature scales.
 * @enum {string}
 */</span>
<span class="token keyword">const</span> TemperatureScale <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token constant">CELSIUS</span><span class="token punctuation">:</span> <span class="token string">'celsius'</span><span class="token punctuation">,</span>
  <span class="token constant">FAHRENHEIT</span><span class="token punctuation">:</span> <span class="token string">'fahrenheit'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * An enum with two options.
 * @enum {number}
 */</span>
<span class="token keyword">const</span> Option <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">/** The option used shall have been the first. */</span>
  <span class="token constant">FIRST_OPTION</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token comment">/** The second among two options. */</span>
  <span class="token constant">SECOND_OPTION</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="_4-类"><a href="#_4-类" aria-hidden="true" class="header-anchor">#</a> 4. 类</h2> <h3 id="_4-1-构造器"><a href="#_4-1-构造器" aria-hidden="true" class="header-anchor">#</a> 4.1  构造器</h3> <p>类构造器是可选的，但是子类的构造器是必须的，因为要在子类的构造器里面调用<code>super()</code>，接口应该在构造器中声明非方法属性。</p> <h3 id="_4-2-字段"><a href="#_4-2-字段" aria-hidden="true" class="header-anchor">#</a> 4.2 字段</h3> <p>在构造方法里面设置一个类对象的所有字段（除开方法的属性）。</p> <ul><li>为不会再被赋值的字段添加<code>@const</code>注解。</li> <li>添加正确的可见注解<code>@private</code>、<code>@protected</code>、<code>@package</code>，并且添加了<code>@private</code>注解的字段名称以<code>_</code>结尾。</li> <li>字段不会被设置在类对象的原型上面。</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Foo</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/** @private @const {!Bar} */</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>bar_ <span class="token operator">=</span> <span class="token function">computeBar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/** @protected @const {!Baz} */</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>baz <span class="token operator">=</span> <span class="token function">computeBaz</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><blockquote><p>再构造器调用完成之后属性不能再被添加或者删除，这样有利于 JavaScript 引擎对于代码的优化。</p></blockquote> <h3 id="_4-3-计算属性"><a href="#_4-3-计算属性" aria-hidden="true" class="header-anchor">#</a> 4.3 计算属性</h3> <p>在一个类里面，当属性是一个 symbol 值的时候，才能使用计算属性。</p> <p>定义在类里面的<code>Symbol.iterator</code>方法用来处理迭代的逻辑。</p> <p>symbol 应该尽量少的使用</p> <blockquote><p>小心使用一些在编译的时候没有 polyfill 的 symbol 值(e.g.,<code>Symbol.isConcatSpreadable</code>)，它们在老版本的浏览器不会正常运行。</p></blockquote> <h3 id="_4-4-静态方法"><a href="#_4-4-静态方法" aria-hidden="true" class="header-anchor">#</a> 4.4 静态方法</h3> <p>在不影响可读性的情况下，宁可使用模块本地函数，也不要使用私有静态方法。</p> <p>静态方法只能够在类内部自己调用。</p> <p>静态方法不能在包含动态实例的变量上面调用，这些变量可能是构造函数，也可能是子类（如果已经调用了，必须加上<code>@nocollapse</code>注解）,并且不能直接在没有定义它自己方法的子类里面调用。</p> <p>Disallowed:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// bad</span>
<span class="token keyword">class</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span> <span class="token comment">/** @nocollapse */</span> <span class="token keyword">static</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Sub</span> <span class="token keyword">extends</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">callFoo</span><span class="token punctuation">(</span><span class="token parameter">cls</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> cls<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>  <span class="token comment">// discouraged: 不能动态的调用静态方法</span>
Sub<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Disallowed: don't call static methods on subclasses that don't define it themselves</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_4-5-不要直接操作prototype"><a href="#_4-5-不要直接操作prototype" aria-hidden="true" class="header-anchor">#</a> 4.5 不要直接操作<code>prototype</code></h3> <p><code>class</code>关键字允许比定义原型属性更清晰、更可读的类定义。</p> <p>普通的实现代码没有处理这些对象的业务，尽管它们对于定义类仍然很有用，混合和修改对象的原型是被明确禁止的。</p> <p><strong>注意</strong>：一些框架的代码（比如 Angular）可能需要使用<code>prototype</code>，不应该使用更糟糕的变通方法来避免这样做。</p> <h3 id="_4-6-getter-and-setter"><a href="#_4-6-getter-and-setter" aria-hidden="true" class="header-anchor">#</a> 4.6 Getter and Setter</h3> <p>不要使用 JavaScript 的 getter 和 setter 属性。它们会让人感觉很惊讶，难以推理，并且在编译器中的支持是有限的。使用普通的方法去替代它。</p> <p><strong>注意</strong>：有一些无法避免使用 getter 和 setter 的情况（比如，Angular 的数据绑定）。仅仅在这些情况下，getter 和 setter 才可以被小心的使用。并且要使用带上<code>get</code>和<code>set</code>关键字的简写方法来定义。或者也使用Object.defineProperties()<code>（不是</code>Object.defineProperty()`，会影响到属性的重命名）来定义 getter 和 setter 方法。getter 方法不能改变观察中的状态。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// bad</span>
<span class="token keyword">class</span> <span class="token class-name">Foo</span> <span class="token punctuation">{</span>
  <span class="token keyword">get</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nextId<span class="token operator">++</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_4-7-重写-tostring"><a href="#_4-7-重写-tostring" aria-hidden="true" class="header-anchor">#</a> 4.7 重写 toString</h3> <p>在保证总是成功执行并且没有副作用的情况下，<code>toString()</code>方法可以被重写。</p> <blockquote><p>特别要注意，在 toString 里面调用其他方法，可能由于异常条件导致无限循环。</p></blockquote> <h3 id="_4-8-接口"><a href="#_4-8-接口" aria-hidden="true" class="header-anchor">#</a> 4.8 接口</h3> <p>接口通过添加<code>@interface</code>或者<code>@record</code>注解来声明。</p> <p>使用<code>@record</code>注解的接口声明能够被一个对象或者一个类显式地（即<code>@implements</code>）和隐式地实现。</p> <p>接口里面所有非静态方法的方法体必须是空的。字段必须在构造函数里面声明为未初始化的成员。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/**
 * Something that can frobnicate.
 * @record
 */</span>
<span class="token keyword">class</span> <span class="token class-name">Frobnicator</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/** @type {number} The number of attempts before giving up. */</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>attempts<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/**
   * Performs the frobnication according to the given strategy.
   * @param {!FrobnicationStrategy} strategy
   */</span>
  <span class="token function">frobnicate</span><span class="token punctuation">(</span><span class="token parameter">strategy</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="_4-9-抽象类"><a href="#_4-9-抽象类" aria-hidden="true" class="header-anchor">#</a> 4.9 抽象类</h3> <p>合适的时候使用抽象类。抽象类或者抽象方法必须添加<code>@abstrct</code>的注解。</p> <h2 id="_5-函数"><a href="#_5-函数" aria-hidden="true" class="header-anchor">#</a> 5. 函数</h2> <h3 id="_5-1-顶层函数"><a href="#_5-1-顶层函数" aria-hidden="true" class="header-anchor">#</a> 5.1 顶层函数</h3> <p>顶层函数可以直接被定义在<code>exports</code>对象上面，或者定义为局部函数，然后选择性的导出。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/** @param {string} str */</span>
exports<span class="token punctuation">.</span><span class="token function-variable function">processString</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Process the string.</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/** @param {string} str */</span>
<span class="token keyword">const</span> <span class="token function-variable function">processString</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Process the string.</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

exports <span class="token operator">=</span> <span class="token punctuation">{</span>processString<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_5-2-嵌套函数和闭包"><a href="#_5-2-嵌套函数和闭包" aria-hidden="true" class="header-anchor">#</a> 5.2 嵌套函数和闭包</h3> <p>函数里面能够嵌套定义函数，函数的名称使用<code>const</code>定义。</p> <h3 id="_5-3-箭头函数"><a href="#_5-3-箭头函数" aria-hidden="true" class="header-anchor">#</a> 5.3 箭头函数</h3> <p>箭头函数为嵌套函数提供了一个简洁的语法声明和容易理解的<code>this</code>作用域。尽可能使用箭头函数而不是<code>funciton</code>关键字，特别是在嵌套函数里面。</p> <p>使用箭头函数，避免<code>f.bind(this)</code>、<code>const self = this</code>这种写法来修改<code>this</code>的指向。箭头函数作为回调函数的时候非常有用，因为它可以显示的指定需要传递的参数，而绑定的回调函数直接传递所有的参数。</p> <p>箭头函数的左侧可以包含零个或者多个参数。如果只有一个不可分解的参数，则包裹参数的括号则是可省略的。使用括号时，可以指定内联参数类型。</p> <blockquote><p>尽管只有一个参数也保持使用括号，这样可以避免出现增加参数但忘记增加括号的情况，在这种情况下，可能会出现一些预期之外的结果。</p></blockquote> <p>箭头函数的右边是函数体。默认情况下，函数体是一个块语句（用花括号扩起来的零个或者多个语句）。如果程序在逻辑上需要返回一个值，或者在函数和方法调用之前使用<code>void</code>（使用<code>void</code>确保返回一个<code>undefined</code>，防止值泄漏，并传达意图）函数体也可以隐式的返回一个单行语句。返回一个单行语句可以提高程序的可读性。</p> <p>例子：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/**
 * Arrow functions can be documented just like normal functions.
 * 箭头函数的文档格式和普通函数的文档是一样的。
 * @param {number} numParam A number to add.
 * @param {string} strParam Another number to add that happens to be a string.
 * @return {number} The sum of the two parameters.
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">moduleLocalFunc</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">numParam<span class="token punctuation">,</span> strParam</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> numParam <span class="token operator">+</span> <span class="token function">Number</span><span class="token punctuation">(</span>strParam<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Uses the single expression syntax with `void` because the program logic does</span>
<span class="token comment">// not require returning a value.</span>
<span class="token comment">// 使用带`void`的单行语句写法，因为程序逻辑上不要求返回一个值</span>
<span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Got </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>result<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">CallbackExample</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/** @private {number} */</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>cachedValue_ <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token comment">// For inline callbacks, you can use inline typing for parameters.</span>
    <span class="token comment">// Uses a block statement because the value of the single expression should</span>
    <span class="token comment">// not be returned and the expression is not a single function call.</span>
    <span class="token comment">// 对于内联回调的参数可以使用内联类型</span>
    <span class="token function">getNullableValue</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token comment">/** ?number */</span> result<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>cachedValue_ <span class="token operator">=</span> result <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token punctuation">:</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h3 id="_5-4-generators"><a href="#_5-4-generators" aria-hidden="true" class="header-anchor">#</a> 5.4 Generators</h3> <p>Generator 可以支持很多有用的抽象，可以根据需要使用。</p> <p>在<code>function</code>关键字后面附加一个<code>*</code>，并且与函数名之间用一个空格隔开，来定一个 Generator 函数。当使用委托 yield 时，在<code>yield</code>关键字前面附加一个<code>*</code></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/** @return {!Iterator&lt;number&gt;} */</span>
<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">gen1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span> <span class="token number">42</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/** @return {!Iterator&lt;number&gt;} */</span>
<span class="token keyword">const</span> <span class="token function-variable function">gen2</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span><span class="token operator">*</span> <span class="token function">gen1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">SomeClass</span> <span class="token punctuation">{</span>
  <span class="token comment">/** @return {!Iterator&lt;number&gt;} */</span>
  <span class="token operator">*</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">yield</span> <span class="token number">42</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="_5-5-参数及返回值类型"><a href="#_5-5-参数及返回值类型" aria-hidden="true" class="header-anchor">#</a> 5.5 参数及返回值类型</h3> <p>函数的参数及返回值类型通常应该使用 JSDoc 注释记录。</p> <h4 id="_5-5-1-默认参数"><a href="#_5-5-1-默认参数" aria-hidden="true" class="header-anchor">#</a> 5.5.1 默认参数</h4> <p>在参数列表中，使用等于操作符的可选参数是被允许的。可选参数的等于号的两边都必须有空格，并且命名和必填参数一样（即不要使用<code>opt_</code>的前缀）。可选参数的 JSDoc 跟在必选参数后面，并且在类型标注上面使用<code>=</code>后缀。可选参数不要使用产生可见副作用的初始值。具象函数的所有可选参数必须要有默认值，尽管这个值是<code>undefined</code>。与之相反的是，抽象或者接口方法必须省略默认的参数值。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/**
 * @param {string} required This parameter is always needed.
 * @param {string=} optional This parameter can be omitted.
 * @param {!Node=} node Another optional parameter.
 */</span>
<span class="token keyword">function</span> <span class="token function">maybeDoSomething</span><span class="token punctuation">(</span>required<span class="token punctuation">,</span> optional <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">,</span> node <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">/** @interface */</span>
<span class="token keyword">class</span> <span class="token class-name">MyInterface</span> <span class="token punctuation">{</span>
  <span class="token comment">/**
   * Interface and abstract methods must omit default parameter values.
   * 接口和抽象方法必须省略默认值
   * @param {string=} optional
   */</span>
  <span class="token function">someMethod</span><span class="token punctuation">(</span><span class="token parameter">optional</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>尽可能少的使用默认参数。当有需要一些没有自然顺序的可选参数的时候，可以使用函数参数解构取代。</p> <blockquote><p>与 python 默认参数不同，JavaScript 的默认参数允许使用一个新的可变对象作为初始值（比如<code>{}</code>或者<code>[]</code>）。因为初始值只有在使用默认值的时候才会被计算。</p></blockquote> <blockquote><p>提示：虽然可以使用任意包括函数表达式作为函数参数的默认值，但是这些初始值应该尽可能保持简单。避免暴露共享可变状态的初始化器，因为它们很容易在函数调用之间引入意外的耦合。</p></blockquote> <h4 id="_5-5-2-rest-参数"><a href="#_5-5-2-rest-参数" aria-hidden="true" class="header-anchor">#</a> 5.5.2 Rest 参数</h4> <p>使用 Rest 参数避免访问<code>arguments</code>，在 JSDoc 中，Rest 参数使用一个<code>...</code>前缀来标注类型。Rest 参数必须在参数列表的最后面。在<code>...</code>和参数名之间没有空格。不要使用<code>var_args</code>命名 Rest 参数。不要使用局部变量或者<code>arguments</code>参数命名参数，这些命名会混淆内建名称。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/**
 * @param {!Array&lt;string&gt;} array This is an ordinary parameter.
 * @param {...number} numbers The remainder of arguments are all numbers.
 */</span>
<span class="token keyword">function</span> <span class="token function">variadic</span><span class="token punctuation">(</span><span class="token parameter">array<span class="token punctuation">,</span> <span class="token operator">...</span>numbers</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_5-6-泛型"><a href="#_5-6-泛型" aria-hidden="true" class="header-anchor">#</a> 5.6 泛型</h3> <p>必要时，在函数或者方法定义之上的 JSDoc 中使用<code>@template TYPE</code>声明泛型函数和方法。</p> <h3 id="_5-7-延展操作符"><a href="#_5-7-延展操作符" aria-hidden="true" class="header-anchor">#</a> 5.7 延展操作符</h3> <p>函数可以使用延展操作符（<code>...</code>）调用。当一个数组或迭代被拆分成一个可变参数函数的多个参数时，使用延展操作符代替<code>Function.prototype.apply</code>。在<code>...</code>后面没有空格。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">myFunction</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>elements</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token function">myFunction</span><span class="token punctuation">(</span><span class="token operator">...</span>array<span class="token punctuation">,</span> <span class="token operator">...</span>iterable<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token function">generator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_6-字符串字面量"><a href="#_6-字符串字面量" aria-hidden="true" class="header-anchor">#</a> 6. 字符串字面量</h2> <h3 id="_6-1-使用单引号"><a href="#_6-1-使用单引号" aria-hidden="true" class="header-anchor">#</a> 6.1 使用单引号</h3> <p>普通字符串使用单引号<code>'</code>分割，不要使用双引号<code>&quot;&quot;</code></p> <blockquote><p>提示：如果字符串包含单引号字符，考虑使用摸板字符串避免必须使用双引号。</p></blockquote> <p>普通字符串字面量不能跨越多行。</p> <h3 id="_6-2-模版字符串"><a href="#_6-2-模版字符串" aria-hidden="true" class="header-anchor">#</a> 6.2 模版字符串</h3> <p>对于复杂的字符串拼接，使用模版字面量（使用 ` 分割），特别是牵涉到多个字符串的时候。模版字符串可以跨越多行。</p> <p>如果模版字符串跨越多行，空格和换行都是可以被正确解释。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">arithmetic</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Here is a table of arithmetic operations:
</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>a<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> + </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>b<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>a <span class="token operator">+</span> b<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>a<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> - </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>b<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>a <span class="token operator">-</span> b<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>a<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> * </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>b<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>a <span class="token operator">*</span> b<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>a<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> / </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>b<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>a <span class="token operator">/</span> b<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_6-3-不要使用行延展"><a href="#_6-3-不要使用行延展" aria-hidden="true" class="header-anchor">#</a> 6.3 不要使用行延展</h3> <p>不要在普通字符串或者模版字符串里面使用行延展（在一个字符串内部一行的末尾加上反斜杠<code>\</code>）。虽然 ES5 允许这个语法，但是当在反斜杠后面加上一个空格的时候，可能导致一些难以解决的问题。并且被加上的这些空格对于阅读代码的人来说不容易被发现。</p> <p>不允许：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> longString <span class="token operator">=</span> <span class="token string">'This is a very long string that far exceeds the 80 \
    column limit. It unfortunately contains long stretches of spaces due \
    to how the continued lines are indented.'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>替代：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> longString <span class="token operator">=</span> <span class="token string">'This is a very long string that far exceeds the 80 '</span> <span class="token operator">+</span>
    <span class="token string">'column limit. It does not contain long stretches of spaces since '</span> <span class="token operator">+</span>
    <span class="token string">'the concatenated strings are cleaner.'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_7-数值字面量"><a href="#_7-数值字面量" aria-hidden="true" class="header-anchor">#</a> 7. 数值字面量</h2> <p>在 JavaScript 中，数值可以使用十进制、十六进制、八进制或者二进制表示。使用带小写字母的<code>0x</code>、<code>0o</code>、<code>0b</code>前缀分别表示十六进制，八进制和二进制。数值不要使用前置 0，除非后面跟了<code>x</code>、<code>o</code>、<code>b</code>这三个字母。</p> <h2 id="_8-控制结构"><a href="#_8-控制结构" aria-hidden="true" class="header-anchor">#</a> 8. 控制结构</h2> <h3 id="_8-1-循环"><a href="#_8-1-循环" aria-hidden="true" class="header-anchor">#</a> 8.1 循环</h3> <p>随着 ES6 的到来，JavaScript 现在三种不同的<code>for</code>循环的方式。这三种方式都可以被使用，但建议尽可能的使用<code>for...of</code>。</p> <p><code>for...in</code>循环只能用于字典类型的对象<code>例如：{'bar': 'foo'}</code>，并且不能使用<code>for...of</code>去迭代一个数组。</p> <p>在<code>for...in</code>循环里面使用<code>Object.prototype.hasOwnProperty()</code>可以排除原型对象上面的属性。尽可能的使用<code>Object.keys()</code>和<code>for...of</code>来代替<code>for...in</code>循环。</p> <h3 id="_8-2-异常"><a href="#_8-2-异常" aria-hidden="true" class="header-anchor">#</a> 8.2 异常</h3> <p>异常是一门编程语言很重要的一部分。异常在任何异常情况发生的时候应该被使用。保持抛出一个<code>Error</code>或者<code>Error</code>的子类：不要抛出一个字符串或者一个对象字面量。使用<code>new</code>来构造一个<code>Error</code>。</p> <p>这种处理可以使用<code>Promise</code>的 rejection 值类扩展。在异步函数中，<code>Promise.reject(obj)</code>和<code>throw obj</code>是相等的。</p> <p>在一个函数里面，自定义异常是一种非常好的输出错误信息的方式。自定义异常应该被定义在原生<code>Error</code>类型不适用的场景下。</p> <p>选择抛出异常，而不是特定的的错误处理方法（比如传递一个包含引用类型的 error 或者是一个带有 error 属性的对象）。</p> <h4 id="_8-2-1-空-catch-块"><a href="#_8-2-1-空-catch-块" aria-hidden="true" class="header-anchor">#</a> 8.2.1 空 catch 块</h4> <p>对捕获的异常不做任何响应是非常不正确的。如果在 catch 块中确定不需要任何操作，也需要在 catch 块中加一段注释表示为什么这么做是对的。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">handleNumericResponse</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>ok<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// it's not numeric; that's fine, just continue</span>
<span class="token punctuation">}</span>
<span class="token keyword">return</span> <span class="token function">handleTextResponse</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_8-3-switch-语句"><a href="#_8-3-switch-语句" aria-hidden="true" class="header-anchor">#</a> 8.3 switch 语句</h3> <p>术语说明：在 switch 块的花括号里面是一个或者多个语句组。每个语句组由一个或多个 swtich 标签（<code>case FOO:</code>或者<code>default:</code>）组成，后面跟着一个或者多个语句。</p> <h4 id="_8-3-1-fall-through-注释"><a href="#_8-3-1-fall-through-注释" aria-hidden="true" class="header-anchor">#</a> 8.3.1 Fall-through: 注释</h4> <p>在一个 swtich 块里面，每个语句组需要被中断（使用<code>break</code>、<code>return</code>或者<code>throw</code>一个异常），或者使用注释进行标记标明程序基础会执行到下一个语句。任何能够表示 fall through 意思的注释都可以。这个特殊的注释不要求在 swtich 块语句组的最后面。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">switch</span> <span class="token punctuation">(</span>input<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">case</span> <span class="token number">1</span><span class="token punctuation">:</span>
  <span class="token keyword">case</span> <span class="token number">2</span><span class="token punctuation">:</span>
    <span class="token function">prepareOneOrTwo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// fall through</span>
  <span class="token keyword">case</span> <span class="token number">3</span><span class="token punctuation">:</span>
    <span class="token function">handleOneTwoOrThree</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span>
  <span class="token keyword">default</span><span class="token punctuation">:</span>
    <span class="token function">handleLargeNumber</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="_8-3-2-default-case-是要存在的"><a href="#_8-3-2-default-case-是要存在的" aria-hidden="true" class="header-anchor">#</a> 8.3.2 <code>default</code> case 是要存在的</h4> <p>每个 swtich 语句都包含一个<code>default</code>语句组，尽管它没有任何代码。<code>default</code>语句必须在最后面。</p> <h2 id="_9-this"><a href="#_9-this" aria-hidden="true" class="header-anchor">#</a> 9. this</h2> <p>使用<code>this</code>的几种场景：类的构造器和方法里面，在类构造器和方法里面定义的箭头函数里面，或者在 JSDoc 中使用<code>@this</code>标注了的立即执行函数中。</p> <p>不能使用<code>this</code>的几种场景：引用全局对象，调用<code>eval</code>的上下文，调用事件的目标，或者是不必要的<code>call()</code>或者<code>apply()</code>函数。</p> <h2 id="_10-相等检查"><a href="#_10-相等检查" aria-hidden="true" class="header-anchor">#</a> 10. 相等检查</h2> <p>除下述情况外使用严格相等运算符（<code>===</code>、<code>!===</code>）。</p> <h3 id="_10-1-根据需求检查"><a href="#_10-1-根据需求检查" aria-hidden="true" class="header-anchor">#</a> 10.1 根据需求检查</h3> <p>需要同时捕获<code>null</code>和<code>undefined</code>。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>someObjectOrPrimitive <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Checking for null catches both null and undefined for objects and</span>
  <span class="token comment">// primitives, but does not catch other falsy values like 0 or the empty</span>
  <span class="token comment">// string.</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_11-不允许使用"><a href="#_11-不允许使用" aria-hidden="true" class="header-anchor">#</a> 11. 不允许使用</h2> <h3 id="_11-1-with"><a href="#_11-1-with" aria-hidden="true" class="header-anchor">#</a> 11.1 with</h3> <p>不能使用<code>with</code>关键字。它会使代码变得难以理解，并且在严格模式下的 ES5 也已经被禁止使用。</p> <h3 id="_11-2-动态代码求值"><a href="#_11-2-动态代码求值" aria-hidden="true" class="header-anchor">#</a> 11.2 动态代码求值</h3> <p>不要使用<code>eval</code>和<code>Function(...string)</code>构造器（出了代码加载器）。这个特性存在潜在的危险，并且在 CSP 环境不会有用。</p> <h3 id="_11-3-自动分号"><a href="#_11-3-自动分号" aria-hidden="true" class="header-anchor">#</a> 11.3 自动分号</h3> <p>总是使用分号结束语句（除了上面提到的类和函数声明之外）。</p> <h3 id="_11-4-非标准特性"><a href="#_11-4-非标准特性" aria-hidden="true" class="header-anchor">#</a> 11.4 非标准特性</h3> <p>不要使用非标准特性。这个包括一些就特性（比如<code>WeakMap.clear</code>），没有写入标准的新特性（比如处于 TC39草案阶段和征求意见阶段的建议，或者是已经采取的意见但是没有实现的 web 标准），或者使一些只在部分浏览器实现了一些特性。只能使用 ECMS-262 或者 WHATWG 中定义的特性。非标准的语言扩展（比如一些由外部转置器提供的）被禁止使用。</p> <blockquote><p>提示：针对特定 APIS 编写的项目，比如 Chrome 的插件或者 Node，是可以使用这些 api 的。</p></blockquote> <h3 id="_11-5-原始类型的包装对象"><a href="#_11-5-原始类型的包装对象" aria-hidden="true" class="header-anchor">#</a> 11.5 原始类型的包装对象</h3> <p>不要在原始包装对象（比如<code>Boolean</code>、<code>Number</code>、<code>String</code>、<code>Symbol</code>）前面使用<code>new</code>，也不要在类型标注里面使用。</p> <p>不允许的：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token comment">/** Boolean */</span> x <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Boolean</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// alerts 'object' - WAT?</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>包装对象可以作为函数调用（比使用<code>+</code>或者拼接空字符串更好），或者创建一个 Symbol。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token comment">/** boolean */</span> x <span class="token operator">=</span> <span class="token function">Boolean</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>x<span class="token punctuation">)</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// alerts 'boolean', as expected</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_11-6-修改内建对象"><a href="#_11-6-修改内建对象" aria-hidden="true" class="header-anchor">#</a> 11.6 修改内建对象</h3> <p>不要修改内建类型，无论是向它们的构造方法添加方法，还是向它们的原型添加方法。避免依赖修改内建对象的库。请注意，JSCompiler 的运行时库将在可能的地方提供符合标准的填充；其他任何东西都不能修改内建对象。</p> <p>非必要情况下（比如第三方 API 要求）不要在全局对象上面添加 Symbol。</p> <h3 id="_11-7-调用构造器的时候省略"><a href="#_11-7-调用构造器的时候省略" aria-hidden="true" class="header-anchor">#</a> 11.7 调用构造器的时候省略<code>()</code></h3> <p><code>new</code>语句调用构造器的时候不要省略小括号<code>()</code>。</p> <p>不允许的：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>替代：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>省略括号可能导致一些细微的错误。下面两个语句是不相等的。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">Foo<span class="token punctuation">.</span>Bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新:</span> <span class="time">10/10/2019, 2:00:00 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/javascript-basic/typescript/generics.html" class="prev">泛型（Generics）</a></span> <span class="next"><a href="/javascript-basic/other/interview.html">面试题</a>→
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/javascript-basic/assets/js/app.d76c9314.js" defer></script><script src="/javascript-basic/assets/js/2.426157aa.js" defer></script><script src="/javascript-basic/assets/js/123.91ec8750.js" defer></script>
  </body>
</html>

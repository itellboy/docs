(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{247:function(e,t,r){"use strict";r.r(t);var a=r(3),v=Object(a.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"proxy"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#proxy"}},[e._v("#")]),e._v(" Proxy")]),e._v(" "),r("p",[e._v("Proxy 对象能够为对象创建一个代理，从而拦截和重新定义对象的基础操作。")]),e._v(" "),r("h2",{attrs:{id:"构造函数"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#构造函数"}},[e._v("#")]),e._v(" 构造函数")]),e._v(" "),r("p",[e._v("通过"),r("code",[e._v("new Proxy(target, handler)")]),e._v("可以创建一个代理")]),e._v(" "),r("ul",[r("li",[e._v("target：需要代理的目标对象")]),e._v(" "),r("li",[e._v("handler：封装了一系列代理操作函数的对象")])]),e._v(" "),r("h2",{attrs:{id:"静态方法"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#静态方法"}},[e._v("#")]),e._v(" 静态方法")]),e._v(" "),r("h3",{attrs:{id:"proxy-revocable-target-handler"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#proxy-revocable-target-handler"}},[e._v("#")]),e._v(" "),r("code",[e._v("Proxy.revocable(target, handler)")])]),e._v(" "),r("p",[e._v("创建一个可撤销的 Proxy 对象，参数与构造函数相同，返回一个对象，结构为"),r("code",[e._v('{"proxy": proxy, "revoke": revoke}')])]),e._v(" "),r("p",[e._v("proxy 为生成的代理对象，revoke 为撤销函数")]),e._v(" "),r("p",[e._v("一旦执行了 revoke 撤销函数，代理对象不可操作")]),e._v(" "),r("h2",{attrs:{id:"handler-对象"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#handler-对象"}},[e._v("#")]),e._v(" handler 对象")]),e._v(" "),r("p",[e._v("通过定义 handler 对象的方法可以实现一些具体的代理操作")]),e._v(" "),r("h3",{attrs:{id:"handler-apply-target-thisarg-argumentlist"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#handler-apply-target-thisarg-argumentlist"}},[e._v("#")]),e._v(" "),r("code",[e._v("handler.apply(target, thisArg, argumentList)")])]),e._v(" "),r("p",[e._v("函数的调用拦截，target 须为函数对象，否则报错")]),e._v(" "),r("p",[e._v("拦截会发生在：")]),e._v(" "),r("ul",[r("li",[r("code",[e._v("proxy(...args)")])]),e._v(" "),r("li",[r("code",[e._v("Object.prototype.call(proxy)")]),e._v("、"),r("code",[e._v("Object.prototype.apply(proxy)")])]),e._v(" "),r("li",[r("code",[e._v("Reflect.apply(target)")])])]),e._v(" "),r("h3",{attrs:{id:"handler-construct-target-argumentslist-newtarget"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#handler-construct-target-argumentslist-newtarget"}},[e._v("#")]),e._v(" "),r("code",[e._v("handler.construct(target, argumentsList[, newTarget])")])]),e._v(" "),r("p",[e._v("构造函数调用拦截，拦截发生在")]),e._v(" "),r("ul",[r("li",[r("code",[e._v("new proxy(...args)")])]),e._v(" "),r("li",[r("code",[e._v("Reflect.construct(target, argumentsList[, newTarget])")])])]),e._v(" "),r("h3",{attrs:{id:"handler-defineproperty-target-key-propdescriptor"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#handler-defineproperty-target-key-propdescriptor"}},[e._v("#")]),e._v(" "),r("code",[e._v("handler.defineProperty(target, key, propDescriptor)")])]),e._v(" "),r("p",[e._v("拦截对象的"),r("code",[e._v("Object.defineProperty()")]),e._v("操作")]),e._v(" "),r("p",[e._v("拦截发生在：")]),e._v(" "),r("ul",[r("li",[r("code",[e._v("Object.defineProperty()")])]),e._v(" "),r("li",[r("code",[e._v("Reflect.defindProperty()")])])]),e._v(" "),r("h3",{attrs:{id:"handler-deleteproperty-target-key"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#handler-deleteproperty-target-key"}},[e._v("#")]),e._v(" "),r("code",[e._v("handler.deleteProperty(target, key)")])]),e._v(" "),r("p",[e._v("拦截 delete 操作")]),e._v(" "),r("p",[e._v("拦截发生在：")]),e._v(" "),r("ul",[r("li",[r("code",[e._v("delete proxy.bar")]),e._v("、"),r("code",[e._v("delete proxy['bar']")])]),e._v(" "),r("li",[r("code",[e._v("Reflect.deleteProperty(target, key)")])])]),e._v(" "),r("h3",{attrs:{id:"handler-get-target-key-receiver"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#handler-get-target-key-receiver"}},[e._v("#")]),e._v(" "),r("code",[e._v("handler.get(target, key[, receiver])")])]),e._v(" "),r("p",[e._v("拦截读取操作")]),e._v(" "),r("p",[e._v("拦截发生在：")]),e._v(" "),r("ul",[r("li",[e._v("属性访问："),r("code",[e._v("proxy.bar")])]),e._v(" "),r("li",[e._v("原型链属性访问："),r("code",[e._v("Object.create(proxy)[foo]")])]),e._v(" "),r("li",[r("code",[e._v("Reflect.get()")])])]),e._v(" "),r("h3",{attrs:{id:"handler-getownpropertydescriptor-target-key"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#handler-getownpropertydescriptor-target-key"}},[e._v("#")]),e._v(" "),r("code",[e._v("handler.getOwnPropertyDescriptor(target, key)")])]),e._v(" "),r("p",[e._v("拦截获取对象属性描述符操作")]),e._v(" "),r("p",[e._v("拦截发生在：")]),e._v(" "),r("ul",[r("li",[r("code",[e._v("Object.getOwnPropertyDescriptor(target, key)")])]),e._v(" "),r("li",[r("code",[e._v("Reflect.getOwnPropertyDescriptor(target, key)")])])]),e._v(" "),r("h3",{attrs:{id:"handler-getprototypeof-target"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#handler-getprototypeof-target"}},[e._v("#")]),e._v(" "),r("code",[e._v("handler.getPrototypeOf(target)")])]),e._v(" "),r("p",[e._v("拦截获取对象原型对象操作")]),e._v(" "),r("p",[e._v("拦截发生在：")]),e._v(" "),r("ul",[r("li",[r("code",[e._v("Object.getPrototypeOf(target)")])]),e._v(" "),r("li",[r("code",[e._v("Reflect.getPrototypeOf(target)")])]),e._v(" "),r("li",[r("code",[e._v("__proto__")])]),e._v(" "),r("li",[r("code",[e._v("instanceof")])])]),e._v(" "),r("h3",{attrs:{id:"handler-has-target-key"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#handler-has-target-key"}},[e._v("#")]),e._v(" "),r("code",[e._v("handler.has(target, key)")])]),e._v(" "),r("p",[e._v("拦截"),r("code",[e._v("in")]),e._v("操作符")]),e._v(" "),r("p",[e._v("拦截发生在：")]),e._v(" "),r("ul",[r("li",[r("code",[e._v("foo in proxy")])]),e._v(" "),r("li",[r("code",[e._v("foo in Object.create(proxy)")])]),e._v(" "),r("li",[r("code",[e._v("with(proxy) { (foo); }")])]),e._v(" "),r("li",[r("code",[e._v("Reflect.has(target, key)")])])]),e._v(" "),r("h3",{attrs:{id:"handler-isextensible-target"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#handler-isextensible-target"}},[e._v("#")]),e._v(" "),r("code",[e._v("handler.isExtensible(target)")])]),e._v(" "),r("p",[e._v("拦截发生在：")]),e._v(" "),r("ul",[r("li",[r("code",[e._v("Object.isExtensible(target)")])]),e._v(" "),r("li",[r("code",[e._v("Reflect.isExtensible(target)")])])]),e._v(" "),r("h3",{attrs:{id:"handler-ownkeys-target"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#handler-ownkeys-target"}},[e._v("#")]),e._v(" "),r("code",[e._v("handler.ownKeys(target)")])]),e._v(" "),r("p",[e._v("拦截发生在：")]),e._v(" "),r("ul",[r("li",[r("code",[e._v("Object.getOwnPropertyNames(target)")])]),e._v(" "),r("li",[r("code",[e._v("Object.getOwnPropertySymbols(target)")])]),e._v(" "),r("li",[r("code",[e._v("Object.keys(target)")])]),e._v(" "),r("li",[r("code",[e._v("Object.ownKeys(target)")])])]),e._v(" "),r("h3",{attrs:{id:"handler-preventextensions-target"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#handler-preventextensions-target"}},[e._v("#")]),e._v(" "),r("code",[e._v("handler.preventExtensions(target)")])]),e._v(" "),r("p",[e._v("拦截发生在：")]),e._v(" "),r("ul",[r("li",[r("code",[e._v("Object.preventExtensions(target)")])]),e._v(" "),r("li",[r("code",[e._v("Reflect.preventExtensions(target)")])])]),e._v(" "),r("h3",{attrs:{id:"handler-set-target-key-value-receiver"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#handler-set-target-key-value-receiver"}},[e._v("#")]),e._v(" "),r("code",[e._v("handler.set(target, key, value, receiver)")])]),e._v(" "),r("p",[e._v("拦截发生在：")]),e._v(" "),r("ul",[r("li",[r("code",[e._v("proxy.bar = ''")])]),e._v(" "),r("li",[r("code",[e._v("Object.create(proxy)[foo] = ''")])]),e._v(" "),r("li",[r("code",[e._v("Reflect.set()")])])]),e._v(" "),r("h3",{attrs:{id:"handler-setpropertyof-target-prototype"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#handler-setpropertyof-target-prototype"}},[e._v("#")]),e._v(" "),r("code",[e._v("handler.setPropertyOf(target, prototype)")])]),e._v(" "),r("p",[e._v("拦截发生在：")]),e._v(" "),r("ul",[r("li",[r("code",[e._v("Object.setPropertyOf(target, prototype)")])]),e._v(" "),r("li",[r("code",[e._v("Reflect.setPropertyOf(target, prototype)")])])])])}),[],!1,null,null,null);t.default=v.exports}}]);